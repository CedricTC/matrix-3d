# GitHub Pages'a Vite tabanlı bir siteyi dağıtmak için örnek bir workflow.
#
# Bu workflow, projenizi derler ve GitHub Pages'a yükler.
#
name: Deploy Vite Project to Pages

on:
  # Varsayılan dalda (main) yapılan push'larda çalışır
  push:
    branches: ["main"]

  # Actions sekmesinden manuel olarak çalıştırmanıza olanak tanır
  workflow_dispatch:

# GITHUB_TOKEN'ın GitHub Pages'a dağıtım yapmasına izin vermek için izinleri ayarlar
permissions:
  contents: read
  pages: write
  id-token: write

# Yalnızca bir eşzamanlı dağıtıma izin verir, devam eden ve kuyruğa alınmış çalıştırmalar arasındaki kuyruğa alınmış çalıştırmaları atlar.
# Ancak, devam eden çalıştırmaları iptal etmeyin, çünkü bu üretim dağıtımlarının tamamlanmasını istiyoruz.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20" # Node.js versiyonunu projenizin gereksinimine göre ayarlayın
          cache: 'npm' # Hangi paket yöneticisini kullandığına göre 'npm', 'yarn' veya 'pnpm' olabilir

      - name: Install Dependencies
        run: npm install # Veya 'yarn install' ya da 'pnpm install'

      - name: Build Project
        run: npm run build # Veya 'yarn build' ya da 'pnpm build'
        env:
          # Eğer projeniz bir alt dizinde yayınlanacaksa (örn: cedrictc.github.io/my-project),
          # bu ortam değişkenini ayarlamanız gerekebilir.
          # Ancak CedricTC.github.io deposunda yayınladığınız için varsayılan olarak '/' base URL kullanılır.
          # Eğer vite.config.js'de base: '/' olarak ayarladıysanız bu satıra gerek yoktur.
          # PUBLIC_URL: /CedricTC.github.io/ # Eğer base URL farklıysa burayı düzenleyin

      - name: Setup Pages
        uses: actions/configure-pages@v5
        with:
          # Vite projeleri için static_site_generator'a gerek yoktur, çünkü çıktıyı doğrudan yüklüyoruz.
          # Bu satırı kaldırabiliriz veya boş bırakabiliriz.
          # static_site_generator: ''

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # Vite'ın build çıktısını içeren klasör. Varsayılan olarak 'dist'tir, ancak projenizde 'doc' ise burayı 'doc' yapın.
          path: ./doc # Burası 'dist' yerine 'doc' olarak güncellendi.

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build # Dağıtım işinin build işi tamamlandıktan sonra çalışmasını sağlar
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4